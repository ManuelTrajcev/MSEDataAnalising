# Домашна 4

## Микросервиси

За разлика од претходната верзија на апликацијата каде сите функционалности се стартувани заедно на една порта и се зависни една од друга (доколку една падне поради грешка, паѓа целата апликација), овде се одделени во три сервиси.
Секој микросервис од апликацијат се стартува на посебена порта и ги обработува соодветните барања кои се праќаат од корисникот преку frontend апликацијата:

`datascraper`: Работи на 127.0.0.1:8000 и е одговорен за собирање на историските податоци од берзата и праќање до корисникот.

`lstm`: Работи на 127.0.0.1:8001 и е одговорен за предвидувања на цени на берзата користејќи LSTM модел, како и за пресметка на moving averages и осцилатори.

`nlp`: Работи на 127.0.0.1:8002 и ги собира вестите поврзани со компании од берзата, кои ги користи за тренирање на NLP модел за определување на сентиментот.

**Овие порти важат кога апликацијата е стартувана локално.

Микросервисте меѓусебе исто така комуницираат со http барање до нивните rest контролери. 

---
## Шаблони

Со цел подобра организација, модификација и проширување на кодот, употребивме неколку шаблони:

### Strategy Pattern

Strategy Pattern е design pattern шаблон кој овозможува дефинирање на семејство од алгоритми, нивно енкапсулирање во одделни класи и динамичко избирање на алгоритмот што ќе се користи за време на извршување. Овој шаблон овозможува лесно менување или додавање на нови алгоритми без да се менува кодот што ги користи.
Шаблон го искористивме за дефинирање на фамилија на алгоритми (во овој случај, трговски индикатори), енкапсулирање на секој од нив и овозможување на нивно заменување. Ова му овозможува на клиентот да избере која стратегија на индикатор да се користи при извршување на програмата, без да се менува кодот. 

Класите како `RSIStrategy`, `StochKStrategy`, `CCIStrategy`, `MACDStrategy`, `ADXStrategy`, `SMAStrategy`, `EMAStrategy`, `IchimokuBaselineStrategy` го имплементираат интерфејсот `IndicatorStrategy` (апстрактна базна класа), кој дефинира методи за пресметка и генерирање на сигнали за секој индикатор.

---

### Factory Method
Factory Method е креационен шаблон кој дефинира метод за инстанцирање на различни објекти, во зависност од влезните параметри.
Во нашиот проект, Factory Method е имплементиран во day_entry_query_factory функцијата. Оваа функција се користи за да креира QuerySet објект кој служи за земање податоци на базата на податоци(DayEntryAsString моделот) врз основа на влезните параметри:
company_code: код на компанијата.
date_range: временски период.

---

### MVP шаблон

Употребивме **MVP (Model-View-Presenter)** архитектурата на веб апликација

#### Model

Django ги управува базата на податоци и бизнис логиката. Контролерите овде (APIs) испраќаат JSON податоци на барањата кои ги испраќа корисинкот.

#### View

React е одговорен за рендерирање на корисничкиот интерфејс им овозможува на корисниците визуелен приказ на податоците во апликацијата.

#### Presenter

Во нашата апликација, React исто така има улога на Презентер:
- Ги управува корисничкиите акции (како што се кликнување на копчиња,  селектирање од опаѓако мени, избор на датум итн.).
- Испраќа барања до Django backend за да добие податоци (fetch). 
- Добиените податоци(во JSON формат) ги зачувува во state и ги трансформира во соодветна форма за приказ во UI-то.

---

Преку оваа подела:
- Django се грижи за серверската страна (модели и логика).
- React се грижи за клиентската страна (интеракција со корисникот и визуелизација).

Целокупниот систем ги применува принципите на MVC архитектурата. Со помош на овој шаблон, се овозможува разделување на логиката во апликациите, што ја прави структурата на кодот:
- **Поорганизирана**
- **Лесно одржлива**
- **Повторно употреблива**
- **Лесна за тестирање**

---
## Хостирање
Апликацијата е хостирана преку Azure и е достапна на следиот линк: https://msedataanlysing-djcjc3cqd5hdgba5.germanywestcentral-01.azurewebsites.net/ 
Хостирана е како микросервисна архитектура и секој сервис работи независно од другите (доколоку дојде до пад на некој од нив, останатите ќе продолжат да работат).
Линкот погоре е за frontend апликакацијата, останатие сервиси се пристапуваат преку следниве URL адреси:
- https://datascraper-f5h8a3ctfqhmc7a5.germanywestcentral-01.azurewebsites.net/
- https://lstm-agdzbxeag4etgwgs.germanywestcentral-01.azurewebsites.net
- https://nlp-e5dxhwgjg4dnh6ak.germanywestcentral-01.azurewebsites.net
**Овие сервиси немаат кориснички интерфејс, тука служат само api повици кои враќаат податоци во json формат кои се прикажуваат на корисникот преку frontend апликацијата. 
